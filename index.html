<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>–ú–æ–π –ª–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</title>
  <meta name="description" content="–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫. –í—Å—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ." />

  <!-- PWA -->
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="manifest.json" />

  <!-- iOS: —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã–≤–∞–ª–æ—Å—å –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="–ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫" />
  <!-- –í–ê–ñ–ù–û: –¥–æ–±–∞–≤—å —Ñ–∞–π–ª apple-touch-icon.png (180√ó180) –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è -->
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />

  <style>
    :root{
      --bg:#0f172a;
      --card:#020617;
      --text:#e5e7eb;
      --muted:rgba(229,231,235,.85);
      --stroke:rgba(255,255,255,.12);
      --btn1:#2563eb;
      --btn2:#1d4ed8;
      --radius:16px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: radial-gradient(1200px 600px at 50% 35%, rgba(59,130,246,.15), transparent 60%), var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .card{
      width:min(520px, 95vw);
      background:rgba(2,6,23,.88);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      padding:22px;
      box-shadow:0 20px 60px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
    }

    h1{
      margin:0 0 14px 0;
      font-size:20px;
      font-weight:700;
      display:flex;
      align-items:center;
      gap:10px;
      letter-spacing:.2px;
    }

    .editor{
      width:100%;
      min-height:120px;
      resize:vertical;
      padding:14px 14px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      color:var(--text);
      outline:none;
      font-size:14px;
      line-height:1.45;
    }
    .editor::placeholder{ color: rgba(229,231,235,.55); }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:12px;
      flex-wrap:wrap;
    }

    button{
      flex:1;
      min-width:140px;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius:12px;
      font-weight:700;
      color:white;
      background: linear-gradient(90deg, var(--btn1), var(--btn2));
      box-shadow: 0 10px 30px rgba(37,99,235,.25);
    }
    button:active{ transform: translateY(1px); }

    .status{
      font-size:13px;
      color: rgba(229,231,235,.75);
      margin-left:auto;
      white-space:nowrap;
    }

    .text{
      margin-top:14px;
      font-size:14px;
      color:var(--muted);
      line-height:1.5;
    }
    .text strong{ color: var(--text); }

    .saved{
      color: rgba(134,239,172,.95);
    }

    .hint{
      margin-top:10px;
      font-size:12px;
      color: rgba(229,231,235,.65);
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>üóÇÔ∏è –ú–æ–π –ª–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h1>

    <textarea id="note" class="editor" placeholder="–ù–∞–ø–∏—à–∏ –∑–¥–µ—Å—å —Å–≤–æ—é –º—ã—Å–ª—å..."></textarea>

    <div class="row">
      <button id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <div id="status" class="status">–ì–æ—Ç–æ–≤</div>
    </div>

    <div class="text">
      –ó–¥–µ—Å—å —è —Ö—Ä–∞–Ω—é —Å–≤–æ–∏ –º—ã—Å–ª–∏.<br/>
      <strong>–ò–¥–µ–∏. –†–µ—à–µ–Ω–∏—è. –û—Ç–∫—Ä–æ–≤–µ–Ω–∏—è.</strong><br/><br/>
      –í—Å—ë –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ —É –º–µ–Ω—è.<br/>
      –ë–µ–∑ –ª–∏—à–Ω–∏—Ö –≥–ª–∞–∑.
    </div>

    <div class="hint">–•—Ä–∞–Ω–µ–Ω–∏–µ: –ª–æ–∫–∞–ª—å–Ω–æ (LocalStorage). –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</div>
  </div>

  <script>
    const KEY = "private_ai_diary_note_v1";

    const note = document.getElementById("note");
    const statusEl = document.getElementById("status");
    const saveBtn = document.getElementById("saveBtn");

    function setStatus(text, cls=""){
      statusEl.textContent = text;
      statusEl.className = "status " + cls;
    }

    // Load
    try{
      const saved = localStorage.getItem(KEY);
      if(saved) note.value = saved;
    }catch(e){}

    // Save (button)
    saveBtn.addEventListener("click", () => {
      try{
        localStorage.setItem(KEY, note.value);
        setStatus("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úÖ", "saved");
        setTimeout(()=>setStatus("–ì–æ—Ç–æ–≤"), 1200);
      }catch(e){
        setStatus("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", "");
      }
    });

    // Autosave (optional): on Ctrl+S / Cmd+S
    window.addEventListener("keydown", (e) => {
      const isSave = (e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "s";
      if(!isSave) return;
      e.preventDefault();
      saveBtn.click();
    });

    // Register Service Worker (PWA offline)
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js").catch(()=>{});
      });
    }
  </script>
</body>
</html>
